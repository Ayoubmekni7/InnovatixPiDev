{% extends 'base.html.twig'  %}
{% block title %} Recrutement {% endblock %}
{% block nompage %} Recrutement {% endblock %}

{% block body %}


    <style>
        .direction {
            position: relative;
        }

        .direction::after {
            content: 'click ici pour voire la liste des demandes pour cet offre !';
            display: none;
            position: absolute;
            top: 100%;
            left: 0;
            padding: 5px;
            background-color: black;
            color: white;
            border-radius: 5px;
        }

        .direction:hover::after {
            display: block;
        }
    </style>

    <div class="content-body">
    <div class="container-fluid">
        <div class="row">
            <div class="col-lg-12">
                <!-- Lien pour ajouter un nouveau crédit -->

            </div>


            <!-- row -->

            <div class="row">

                <div class="col-lg-12">
                    <div class="card">
                        <div class="card-header">
                            <h4 class="card-title">Liste des offres</h4>
                        </div>
                        <div class="card-body">
                            <div class="table-responsive " >

                                <table class="table table-responsive-md"  >
                                    <thead>
                                    <tr>
                                        <th><strong>ID_offre</strong></th>
                                        <th><strong>Title</strong></th>
                                        <th><strong>Domaine</strong></th>
                                        <th><strong>Type</strong></th>
                                        <th><strong>Poste</strong></th>
                                        <th><strong>Expérience</strong></th>
                                        <th><strong>Niveau</strong></th>
                                        <th><strong>Language</strong></th>
                                        <th style="width: 200px" ><strong>Description</strong></th>
                                        <th><strong>Exigence</strong></th>
                                        <th><strong>Date</strong></th>
                                        <th><strong>Mots Clés</strong></th>
                                        <th><strong>Pfe</strong></th>
                                        <th><strong>Action</strong></th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    {% for a in offres %}
                                        <tr>
                                            <td>{{ a.id }}</td>
                                            <td ><a href="{{ path('DemandeParOffres',{'id':a.id}) }}" class="direction">{{ a.title }}</a></td>
                                            <td>{{ a.domaine }}</td>
                                            <td>{{ a.typeOffre }}</td>
                                            <td>{{ a.postePropose }}</td>
                                            <td>{{ a.experience }}</td>
                                            <td>{{ a.niveau }}</td>
                                            <td>{{ a.language }}</td>

                                            <td style="font-size: 15px;
                                                        " > <p  style="color:#777;
                                                        font-size: 15px;
                                                        display: -webkit-box;
                                                        -webkit-line-clamp: 2;
                                                        -webkit-box-orient: vertical;
                                                        overflow: hidden;
                                                        line-height: 1.5;" > {{ a.description }}</p>
                                            </td>
                                            <td  style="font-size: 15px;
                                                        "><p  style="color:#777;
                                                        font-size: 15px;
                                                        display: -webkit-box;
                                                        -webkit-line-clamp: 2;
                                                        -webkit-box-orient: vertical;
                                                        overflow: hidden;
                                                        line-height: 1.5;" > {{ a.exigenceOffre }}</p>
                                            </td>
                                            <td>{{ a.datePostu | date('d F Y') }}</td>

                                            <td>
                                                {% if a.motsCles is empty %}

                                                <p> n'a pas de mots clés </p>
                                                {% else %}
                                                {% for item in a.motsCles %}
                                                    {{ item ~ ',' }}
                                                {% endfor %}
                                                    {% endif %}
                                            </td>
                                            <td style="background-size: 5cm">
                                                {% if a.pfeBook is empty %}

                                                    <p style="color:#777;
                                                        font-size: 15px;
                                                        display: -webkit-box;
                                                        -webkit-line-clamp: 2;
                                                        -webkit-box-orient: vertical;
                                                        overflow: hidden;
                                                        line-height: 1.5;"> il n'y a pas de pfe Book</p>
                                                {% else %}
                                                    <a href="{{ asset('upload/CV/' ~ a.pfeBook) }}" target="_blank">
                                                        <button>Ouvrir PDF</button>
                                                    </a>
                                                    <a href="{{ asset('upload/CV/' ~ a.pfeBook) }}" download="{{ a.pfeBook ~ '.pdf' }}">
                                                        <button class="btn btn-bd-download d-none d-lg-inline-block mb-3 mb-md-0 ml-md-3">Télécharger</button>
                                                    </a>
                                                {% endif %}
                                            </td>
                                            <td>
                                                <div class="d-flex">
                                                    <a href="{{ path('editOffre', {'id':a.id}) }}">
                                                        <button class="btn btn-success shadow btn-xs sharp me-1">Modifier</button>
                                                    </a>
                                                    <a href="{{ path('deleteOffre', {'id':a.id}) }}">
                                                        <button class="btn btn-danger shadow btn-xs sharp">Supprimer</button>
                                                    </a>
                                                </div>
                                            </td>

                                            <td></td>

                                        </tr>
                                    {% endfor %}
                                    </tbody>
                                </table>

                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>




{% endblock %}